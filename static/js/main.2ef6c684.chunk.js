(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{90:function(e,t,c){"use strict";c.r(t);c(47);var r,n=c(93),a=c(7),l=c(91),s=c(92),j=c(94),i=c(20),o=c(0),b=c.n(o),d=c(1),O=["ROCK-SCISSORS","SCISSORS-PAPER","PAPER-ROCK"],h=function(e,t){return e&&t?e.played===t.played?Object(d.jsx)("div",{style:{color:"green"},children:"DRAW!!!"}):O.includes(e.played+"-"+t.played)?Object(d.jsx)("div",{style:{color:"#BB5A5A"},children:e.name}):Object(d.jsx)("div",{style:{color:"#046582"},children:t.name}):null},u=function(e,t,c){var r=0;return e.forEach((function(e){var c=t===e.playerA.name?[e.playerA,e.playerB]:[e.playerB,e.playerA],n=Object(a.a)(c,2),l=n[0],s=n[1];r+=O.includes(l.played+"-"+s.played)?1:0})),"".concat(r/c*100,"% (").concat(r," of ").concat(c,")")},x=function(){var e=Object(o.useRef)(null),t=Object(o.useState)({}),c=Object(a.a)(t,2),r=c[0],n=c[1],b=Object(o.useState)({}),O=Object(a.a)(b,2),u=O[0],x=O[1];Object(o.useEffect)((function(){if(e.current=new WebSocket("ws://bad-api-assignment.reaktor.com/rps/live"),e.current.onopen=function(){return console.log("ws opened")},e.current)return e.current.onmessage=function(e){var t=JSON.parse(e.data);try{n({name:JSON.parse(t).playerA.name,played:JSON.parse(t).playerA.played}),x({name:JSON.parse(t).playerB.name,played:JSON.parse(t).playerB.played})}catch(c){console.log(c)}},e.current.onclose=function(){return e.current.close()},function(){return e.current.close()}}),[]);var p=function(e){switch(e.played){case"ROCK":return Object(d.jsx)(i.b,{});case"SCISSORS":return Object(d.jsx)(i.c,{});case"PAPER":return Object(d.jsx)(i.a,{});default:return Object(d.jsx)("div",{children:"..."})}};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Current Game"}),Object(d.jsx)("br",{}),Object(d.jsxs)(l.a,{children:[Object(d.jsx)(s.a,{children:Object(d.jsxs)(j.a,{style:{height:"15rem"},children:[Object(d.jsx)(j.a.Title,{children:" Player A "}),Object(d.jsx)("h3",{children:r.name}),Object(d.jsx)("span",{style:{color:"#BB5A5A",fontSize:"5rem"},children:p(r)}),Object(d.jsx)("div",{style:{color:"#BB5A5A",fontWeight:"bold"},children:r.played})]})}),Object(d.jsx)(s.a,{children:Object(d.jsxs)(j.a,{style:{height:"10rem",border:"none"},children:[Object(d.jsx)(j.a.Title,{children:Object(d.jsx)("h2",{children:"RESULT"})}),Object(d.jsx)("br",{}),Object(d.jsx)("h1",{children:Object(d.jsx)("b",{children:h(r,u)})})]})}),Object(d.jsx)(s.a,{children:Object(d.jsxs)(j.a,{style:{height:"15rem"},children:[Object(d.jsx)(j.a.Title,{children:" Player B "}),Object(d.jsx)("h3",{children:u.name}),Object(d.jsx)("span",{style:{color:"#046582",fontSize:"5rem"},children:p(u)}),Object(d.jsxs)("div",{style:{color:"#046582",fontWeight:"bold"},children:[u.played," "]})]})})]})]})},p=function(){return Object(d.jsx)("footer",{style:{textAlign:"center",bottom:"0",left:"0",position:"relative",width:"100%"},children:Object(d.jsx)("p",{children:"\xa9 HIEN TRAN 2021"})})},y=c(18),f=c(38).a.h1(r||(r=Object(y.a)(["\n   font-family: 'Pacifico', cursive;\n   background-image: linear-gradient(\n      to right,\n      #d16ba5,\n      #c777b9,\n      #ba83ca,\n      #aa8fd8,\n      #9a9ae1,\n      #8aa7ec,\n      #79b3f4,\n      #69bff8,\n      #52cffe,\n      #41dfff,\n      #46eefa,\n      #5ffbf1\n   );\n   color: #fff;\n   font-weight: bold;\n   padding: 50px;\n"]))),m=function(){return Object(d.jsx)("div",{children:Object(d.jsx)(f,{className:"jumbotron text-center bg-primary",children:"Rock-Paper-Scissors Statistics"})})},g=c(10),A=c(41),S=c(23),B=c.n(S),v=c(11),C=c(45),k=c(24),P=c(42),E=c.n(P),R=function(){var e=Object(o.useState)([]),t=Object(a.a)(e,2),c=t[0],r=t[1],n=Object(o.useState)([]),l=Object(a.a)(n,2),s=l[0],j=l[1],i=Object(o.useState)(),b=Object(a.a)(i,2),O=b[0],x=b[1],p=function(){var e=Object(A.a)(B.a.mark((function e(){return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.a.get("/rps/history",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(e){if(e){var t=e.data.data,c=Object(g.a)(new Set([].concat(Object(g.a)(t.map((function(e){return e.playerA.name}))),Object(g.a)(t.map((function(e){return e.playerB.name})))))).sort();j(c),x(Object(v.sample)(c)),r(t)}})).catch((function(e){return console.log(e)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=s.map((function(e){return Object.create({value:e,label:e})})),f=[].concat(Object(g.a)(c.map((function(e){return e.playerA.name}))),Object(g.a)(c.map((function(e){return e.playerB.name})))).filter((function(e){return e===O})).length,m=[].concat(Object(g.a)(c.map((function(e){return e.playerA}))),Object(g.a)(c.map((function(e){return e.playerB})))).filter((function(e){return e.name===O})).map((function(e){return e.played})),S=Object(v.flow)(v.countBy,v.entries,Object(v.partialRight)(v.maxBy,v.last),v.head)(m);console.log(S);var P=c.filter((function(e){return e.playerA.name===O||e.playerB.name===O}));return Object(o.useEffect)((function(){p()}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("h2",{children:"Player Statistics"}),Object(d.jsx)("br",{}),Object(d.jsxs)(k.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Name"}),Object(d.jsx)("th",{children:"Numbers of games"}),Object(d.jsx)("th",{children:"Win ratio"}),Object(d.jsx)("th",{children:"Most played hand"})]})}),Object(d.jsx)("tbody",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{textAlign:"left"},children:Object(d.jsx)(C.a,{options:y,onChange:function(e){return x(e.value)},placeholder:O,defaultValue:O,isSearchable:!0})}),Object(d.jsx)("td",{children:f}),Object(d.jsx)("td",{children:u(P,O,f)}),Object(d.jsx)("td",{children:S})]})})]}),Object(d.jsx)("br",{}),Object(d.jsx)("h2",{children:"Statistics"}),Object(d.jsx)("br",{}),Object(d.jsxs)(k.a,{striped:!0,bordered:!0,hover:!0,children:[Object(d.jsx)("thead",{children:Object(d.jsxs)("tr",{children:[Object(d.jsx)("th",{children:"Game ID"}),Object(d.jsx)("th",{style:{backgroundColor:"#FF5C58"},children:"Player A Name"}),Object(d.jsx)("th",{style:{backgroundColor:"#F38BA0"},children:"Player A Played"}),Object(d.jsx)("th",{style:{backgroundColor:"#E7FBBE"},children:"RESULT"}),Object(d.jsx)("th",{style:{backgroundColor:"#949CDF"},children:"Player B Played"}),Object(d.jsx)("th",{style:{backgroundColor:"#6998AB"},children:"Player B Name"})]})}),Object(d.jsxs)("tbody",{children:[Object(d.jsx)("tr",{}),P&&P.map((function(e){return Object(d.jsxs)("tr",{children:[Object(d.jsx)("td",{style:{textAlign:"left"},children:e.gameId}),Object(d.jsx)("td",{style:{backgroundColor:"#FE8F8F"},children:e.playerA.name}),Object(d.jsx)("td",{style:{backgroundColor:"#FFBCBC"},children:e.playerA.played}),Object(d.jsx)("td",{style:{backgroundColor:"#FFFDDE"},children:h(e.playerA,e.playerB)}),Object(d.jsx)("td",{style:{backgroundColor:"#A7C5EB"},children:e.playerB.played}),Object(d.jsx)("td",{style:{backgroundColor:"#B1D0E0"},children:e.playerB.name})]},e.t)}))]})]})]})},F=function(){return Object(d.jsxs)(n.a,{style:{textAlign:"center"},children:[Object(d.jsx)(m,{}),Object(d.jsx)("br",{}),Object(d.jsx)(x,{}),Object(d.jsx)("br",{}),Object(d.jsx)(R,{}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)("br",{}),Object(d.jsx)(p,{})]})},w=c(13);c.n(w).a.render(Object(d.jsx)(b.a.StrictMode,{children:Object(d.jsx)(F,{})}),document.getElementById("root"))}},[[90,1,2]]]);
//# sourceMappingURL=main.2ef6c684.chunk.js.map